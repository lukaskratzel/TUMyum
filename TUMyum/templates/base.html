<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TUMyum</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .page {
            display: none;
        }

        .page-active {
            display: block;
        }

        .navbar-brand {
            width: 100%;
            text-align: center;
        }

        .star-rating {
            font-size: 1.5em;
            color: orange;
        }

        .dish-img {
            width: 50px;
            height: auto;
        }

        body {
            background-color: #FAF9F6;
        }
    </style>
</head>

<body>
    
    <!-- Page 1: Mensa Selection -->
    <div id="page1" class="page container page-active">
        <div class="h-100 d-flex flex-column" style="max-height: 100vh;">
            <img src="logo-preliminary.png" alt="test logo">
            <h3 class="p-2 text-center">üìç W√§hle einen Standort</h2>
            <div class="overflow-auto flex-grow-1 rounded border mb-3">
                <div class="list-group-flush" id="canteens">
                    <!-- Canteens will be added here once fetched -->
                </div>
            </div>
        </div>
    </div>

    <!-- Page 2: Dish Selection -->

    <div id="page2" class="page container">
        <div class="h-100 d-flex flex-column" style="max-height: 100vh;">
            <div class="container-fluid d-flex p-5">
                <div class="btn btn-outline-success">Go Back</div>
                <div class="text-center text-wrap h" id="canteen"></div>
            </div>
            <div class="overflow-auto flex-grow-1 rounded border mb-3">
                <div class="list-group-flush" id="meals">
                    <!-- Canteens will be added here once fetched -->
                </div>
            </div>
        </div>
    </div>

    <!-- Page 3: Review Submission -->
    <div id="page3" class="page container">
            <h1 class="navbar-brand container-fluid text-wrap">Schweinelachssteak mit Pfefferrahmso√üe und Kartoffelp√ºree</h1>
        <div>
            <p>Wie fandest du dein Essen?</p>
            <span class="star-rating">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
            <button class="btn btn-primary" onclick="submitReview()">absenden</button>
        </div>
    </div>

    <script>
        var currentpage = 1
        var activeCanteen

        fetch('https://tum-dev.github.io/eat-api/enums/canteens.json')
            .then(result => result.json())
            .then(canteens => {
                const canteenList = document.getElementById('canteens')

                canteens.forEach(canteen => {
                    const entry = document.createElement('button')
                    entry.className = 'list-group-item list-group-item-action text-wrap'
                    entry.innerText = canteen['name']
                    canteenList.appendChild(entry)
                    entry.onclick = function() {
                        activeCanteen = entry.innerText
                        document.getElementById('canteen').innerText = activeCanteen
                        showPage();
                    };
                });
            })

        function showPage() {
            let pages = document.getElementsByClassName('page');
            for (let i = 0; i < pages.length; i++) {
                pages[i].classList.remove('page-active');
            }
            currentpage++
            let page = document.getElementById('page' + currentpage);
            page.classList.add('page-active');
        }

        function submitReview() {
            // Implementation for submitting review
            alert('Review submitted!');
            showPage(1); // Return to the first page
        }
    </script>

    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
</body>

</html>